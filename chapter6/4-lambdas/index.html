<!DOCTYPE html>
<html lang="fr" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.76.5" />
    <meta name="description" content="">


    <link rel="icon" href="/CPP_Learning/images/favicon.png" type="image/png">

    <title>Lambdas :: Cours de C&#43;&#43; - Niveau Master</title>

    
    <link href="/CPP_Learning/css/nucleus.css?1615615412" rel="stylesheet">
    <link href="/CPP_Learning/css/fontawesome-all.min.css?1615615412" rel="stylesheet">
    <link href="/CPP_Learning/css/hybrid.css?1615615412" rel="stylesheet">
    <link href="/CPP_Learning/css/featherlight.min.css?1615615412" rel="stylesheet">
    <link href="/CPP_Learning/css/perfect-scrollbar.min.css?1615615412" rel="stylesheet">
    <link href="/CPP_Learning/css/auto-complete.css?1615615412" rel="stylesheet">
    <link href="/CPP_Learning/css/atom-one-dark-reasonable.css?1615615412" rel="stylesheet">
    <link href="/CPP_Learning/css/theme.css?1615615412" rel="stylesheet">
    <link href="/CPP_Learning/css/hugo-theme.css?1615615412" rel="stylesheet">
    
    <link href="/CPP_Learning/css/theme-mine.css?1615615412" rel="stylesheet">
    
    <link href="/CPP_Learning/css/syntax.css?1615615412" rel="stylesheet">

    <script src="/CPP_Learning/js/jquery-3.3.1.min.js?1615615412"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/CPP_Learning/chapter6/4-lambdas/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://laefy.github.io/CPP_Learning/">🥞 C++ 🥞</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Rechercher...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/CPP_Learning/js/lunr.min.js?1615615412"></script>
<script type="text/javascript" src="/CPP_Learning/js/auto-complete.js?1615615412"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/laefy.github.io\/CPP_Learning\/";
    
</script>
<script type="text/javascript" src="/CPP_Learning/js/search.js?1615615412"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter1/" title="Introduction au C&#43;&#43;" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter1/">
          <b>1- </b>Introduction au C&#43;&#43;
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/1-language/" title="Présentation du langage" class="dd-item ">
        <a href="/CPP_Learning/chapter1/1-language/">
        Présentation du langage
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/CPP_Learning/chapter1/2-tools/" title="Outils" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter1/2-tools/">
          Outils
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/2-tools/1-vscode/" title="Visual Studio Code" class="dd-item ">
        <a href="/CPP_Learning/chapter1/2-tools/1-vscode/">
        Visual Studio Code
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/2-tools/2-cmake/" title="CMake" class="dd-item ">
        <a href="/CPP_Learning/chapter1/2-tools/2-cmake/">
        CMake
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/2-tools/3-git/" title="Git" class="dd-item ">
        <a href="/CPP_Learning/chapter1/2-tools/3-git/">
        Git
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/2-tools/4-compilation/" title="Compilation &amp; Exécution" class="dd-item ">
        <a href="/CPP_Learning/chapter1/2-tools/4-compilation/">
        Compilation &amp; Exécution
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/CPP_Learning/chapter1/3-practice/" title="Premiers programmes" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter1/3-practice/">
          Premiers programmes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/3-practice/1-hello-world/" title="👋 Hello World" class="dd-item ">
        <a href="/CPP_Learning/chapter1/3-practice/1-hello-world/">
        👋 Hello World
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/3-practice/2-parrot.fd/" title="🦜 Perroquet" class="dd-item ">
        <a href="/CPP_Learning/chapter1/3-practice/2-parrot.fd/">
        🦜 Perroquet
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/3-practice/3-array/" title="🔢 Tableau Numérique" class="dd-item ">
        <a href="/CPP_Learning/chapter1/3-practice/3-array/">
        🔢 Tableau Numérique
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/3-practice/4-calculator/" title="🧮 Calculette" class="dd-item ">
        <a href="/CPP_Learning/chapter1/3-practice/4-calculator/">
        🧮 Calculette
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter1/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter1/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter2/" title="Classes" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter2/">
          <b>2- </b>Classes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/1-poo/" title="C&#39;est quoi un objet déjà ?" class="dd-item ">
        <a href="/CPP_Learning/chapter2/1-poo/">
        C&#39;est quoi un objet déjà ?
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/2-first-class/" title="✨ Première classe" class="dd-item ">
        <a href="/CPP_Learning/chapter2/2-first-class/">
        ✨ Première classe
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/3-constructor/" title="🔨 Constructeur" class="dd-item ">
        <a href="/CPP_Learning/chapter2/3-constructor/">
        🔨 Constructeur
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/4-clone/" title="🧬 Clône" class="dd-item ">
        <a href="/CPP_Learning/chapter2/4-clone/">
        🧬 Clône
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/5-rectangle/" title="🔳 Rectangle" class="dd-item ">
        <a href="/CPP_Learning/chapter2/5-rectangle/">
        🔳 Rectangle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/6-polygon/" title="💠 Polygône" class="dd-item ">
        <a href="/CPP_Learning/chapter2/6-polygon/">
        💠 Polygône
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter2/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter2/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter3/" title="Conteneurs standards" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter3/">
          <b>3- </b>Conteneurs standards
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/1-doc/" title="Un peu de doc..." class="dd-item ">
        <a href="/CPP_Learning/chapter3/1-doc/">
        Un peu de doc...
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/2-vectors/" title="Tableaux dynamiques" class="dd-item ">
        <a href="/CPP_Learning/chapter3/2-vectors/">
        Tableaux dynamiques
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/3-sequentials/" title="Autres conteneurs séquentiels" class="dd-item ">
        <a href="/CPP_Learning/chapter3/3-sequentials/">
        Autres conteneurs séquentiels
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/4-associatives/" title="Conteneurs associatifs" class="dd-item ">
        <a href="/CPP_Learning/chapter3/4-associatives/">
        Conteneurs associatifs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/5-strings/" title="Manipulation de chaînes" class="dd-item ">
        <a href="/CPP_Learning/chapter3/5-strings/">
        Manipulation de chaînes
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/6-tuples/" title="Paires et tuples" class="dd-item ">
        <a href="/CPP_Learning/chapter3/6-tuples/">
        Paires et tuples
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter3/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter3/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter4/" title="Héritage" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter4/">
          <b>4- </b>Héritage
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/1-hierarchy/" title="💼 Hiérarchie professionnelle" class="dd-item ">
        <a href="/CPP_Learning/chapter4/1-hierarchy/">
        💼 Hiérarchie professionnelle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/2-farm/" title="🐮 Concerto animalier" class="dd-item ">
        <a href="/CPP_Learning/chapter4/2-farm/">
        🐮 Concerto animalier
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/3-virtual/" title="Résolution d&#39;appel virtuel" class="dd-item ">
        <a href="/CPP_Learning/chapter4/3-virtual/">
        Résolution d&#39;appel virtuel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/4-polymorphism/" title="Polymorphisme" class="dd-item ">
        <a href="/CPP_Learning/chapter4/4-polymorphism/">
        Polymorphisme
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/5-vehicles/" title="🚗 Véhicule partagé" class="dd-item ">
        <a href="/CPP_Learning/chapter4/5-vehicles/">
        🚗 Véhicule partagé
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter4/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter4/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter5/" title="Gestion des ressources" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter5/">
          <b>5- </b>Gestion des ressources
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/1-lifespan/" title="Durée de vie" class="dd-item ">
        <a href="/CPP_Learning/chapter5/1-lifespan/">
        Durée de vie
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/2-ownership/" title="Ownership" class="dd-item ">
        <a href="/CPP_Learning/chapter5/2-ownership/">
        Ownership
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/3-smart-ptrs/" title="Pointeurs intelligents" class="dd-item ">
        <a href="/CPP_Learning/chapter5/3-smart-ptrs/">
        Pointeurs intelligents
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter5/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter5/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter6/" title="Algorithmes" class="dd-item 
        parent
        
        
        ">
      <a href="/CPP_Learning/chapter6/">
          <b>6- </b>Algorithmes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter6/1-searches/" title="Parcours et recherches" class="dd-item ">
        <a href="/CPP_Learning/chapter6/1-searches/">
        Parcours et recherches
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter6/2-transformations/" title="Transformations" class="dd-item ">
        <a href="/CPP_Learning/chapter6/2-transformations/">
        Transformations
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter6/3-iterators/" title="Itérateurs" class="dd-item ">
        <a href="/CPP_Learning/chapter6/3-iterators/">
        Itérateurs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter6/4-lambdas/" title="Lambdas" class="dd-item active">
        <a href="/CPP_Learning/chapter6/4-lambdas/">
        Lambdas
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter6/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter6/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter6/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter6/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>Accès rapide</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/Laefy/CPP_Learning_Code/"><i class='fab fa-github'></i> Dépôt GitHub</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://laefy.github.io/CPP_Learning/workflow"><i class='far fa-list-alt'></i> Workflow</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://laefy.github.io/CPP_Learning/faq"><i class='fas fa-question-circle'></i> FAQ</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://en.cppreference.com/w/"><i class='fas fa-passport'></i> CPP-Ref</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Supprimer l&#39;historique</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/CPP_Learning/'>Accueil</a> > <a href='/CPP_Learning/chapter6/'>Algorithmes</a> > Lambdas
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#syntaxe">Syntaxe</a></li>
        <li><a href="#stockage-et-appel">Stockage et appel</a></li>
        <li><a href="#captures">Captures</a></li>
        <li><a href="#compilation">Compilation</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Lambdas
            </h1>
          

        


<p>Les lambdas sont des objets-fonction un peu spéciaux, que l&rsquo;on peut facilement définir depuis le corps d&rsquo;une fonction.
Vous avez déjà dû voir de nombreux exemples d&rsquo;utilisation de lambda tout au long de ce cours.
Nous allons maintenant revenir plus en détail sur leur fonctionnement et vous montrez tout ce qu&rsquo;il est possible de faire avec.</p>
<hr>
<h3 id="syntaxe">Syntaxe</h3>
<p>La définition d&rsquo;une lambda est composée en général de trois parties :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">](</span><span class="kt">int</span> <span class="n">p1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p3</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">c1</span> <span class="o">*</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">c2</span> <span class="o">*</span> <span class="n">p2</span> <span class="o">+</span> <span class="n">c3</span> <span class="o">*</span> <span class="n">p3</span><span class="p">;</span> <span class="p">}</span>
</code></pre></div><p>La partie entre crochet s&rsquo;appelle la <strong>capture</strong>.
Par défaut, la lambda n&rsquo;a pas accès aux variables définies dans la fonction parent.
La capture permet donc de spécifier les variables locales du parent que l&rsquo;on veut pouvoir utiliser dans la lambda.</p>
<p>La deuxième partie est composée des paramètres de la lambda.
Comme n&rsquo;importe quelle fonction, il s&rsquo;agit d&rsquo;une liste d&rsquo;éléments entre parenthèses, et chacun des élément est composé d&rsquo;un type et d&rsquo;un identifiant (ce dernier pouvant être omis, s&rsquo;il n&rsquo;est pas utilisé).</p>
<p>Enfin, la dernière partie correspond au corps de la lambda.
Il contient les instructions qui seront exécutées lorsque la lambda est appelée.
Sachez que vous pouvez mettre autant d&rsquo;instructions que vous voulez dans le corps d&rsquo;une lambda.
En général, c&rsquo;est mieux d&rsquo;avoir des lambdas courtes, et éventuellement d&rsquo;extraire une partie du code dans une vraie fonction annexe si la lambda devient trop grosse.
Cela permet de garder du code lisible.</p>
<hr>
<h3 id="stockage-et-appel">Stockage et appel</h3>
<p>Les lambdas peuvent être placées dans des variables locales ayant pour type <code>auto</code> :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">const</span> <span class="k">auto</span> <span class="n">compare_stuff</span> <span class="o">=</span> <span class="p">[](</span><span class="k">const</span> <span class="n">Stuff</span><span class="o">&amp;</span> <span class="n">stuff1</span><span class="p">,</span> <span class="k">const</span> <span class="n">Stuff</span><span class="o">&amp;</span> <span class="n">stuff2</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">stuff1</span><span class="p">.</span><span class="n">content</span> <span class="o">==</span> <span class="n">stuff2</span><span class="p">.</span><span class="n">content</span><span class="p">;</span> <span class="p">};</span>

<span class="n">Stuff</span> <span class="n">stuff1</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">},</span> <span class="n">stuff2</span> <span class="p">{</span> <span class="mi">2</span> <span class="p">},</span> <span class="n">stuff3</span> <span class="p">{</span> <span class="mi">2</span> <span class="p">},</span> <span class="n">stuff4</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="n">compare_stuff</span><span class="p">(</span><span class="n">stuff1</span><span class="p">,</span> <span class="n">stuff2</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">compare_stuff</span><span class="p">(</span><span class="n">stuff2</span><span class="p">,</span> <span class="n">stuff3</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">compare_stuff</span><span class="p">(</span><span class="n">stuff1</span><span class="p">,</span> <span class="n">stuff3</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div><p>On peut également les assigner à des objets de type <code>std::function&lt;Ret(Params...)&gt;</code> si la signature de la lambda correspond bien au paramètre de template de la <code>std::function</code> :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">const</span> <span class="n">Dog</span> <span class="n">my_first_dog</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">(</span><span class="k">const</span> <span class="n">Dog</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">is_my_dog</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="n">my_first_dog</span><span class="p">](</span><span class="k">const</span> <span class="n">Dog</span><span class="o">&amp;</span> <span class="n">dog</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">&amp;</span><span class="n">dog</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">my_first_dog</span><span class="p">;</span> <span class="p">};</span>

<span class="k">if</span> <span class="p">(</span><span class="n">Dog</span><span class="o">*</span> <span class="n">my_new_dog</span> <span class="o">=</span> <span class="n">get_new_dog</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">is_my_dog</span> <span class="o">=</span> <span class="p">[</span><span class="n">my_new_dog</span><span class="p">](</span><span class="k">const</span> <span class="n">Dog</span><span class="o">&amp;</span> <span class="n">dog</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">&amp;</span><span class="n">dog</span> <span class="o">==</span> <span class="n">my_new_dog</span><span class="p">;</span> <span class="p">};</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">is_my_dog</span><span class="p">(</span><span class="n">my_first_dog</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Seems like I got a new dog.&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="notices note" ><p><code>std::function&lt;Ret(Params...)&gt;</code> est une classe définie dans <code>&lt;functional&gt;</code> qui permet de wrapper n&rsquo;importe quel genre de foncteur : fonctions libres, lambdas, objets avec <code>operator()</code>, appel à une fonction-membre, etc.<br>
C&rsquo;est très pratique pour mettre en place un système de <strong>callbacks</strong>, c&rsquo;est-à-dire pour stocker des fonctions destinées à être appelées plus tard dans le programme.</p>
</div>

<p>Enfin, on peut les passer directement à des fonctions qui attendent des <code>std::function&lt;...&gt;</code> ou des &ldquo;<em>Callables</em>&rdquo; (comme les fonctions de <code>&lt;algorithm&gt;</code>) :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">20u</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">mutiples_nb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">count_if</span><span class="p">(</span><span class="n">values</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">values</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="p">[</span><span class="n">i</span><span class="p">](</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">v</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0u</span><span class="p">;</span> <span class="p">});</span>
<span class="p">}</span>
</code></pre></div><hr>
<h3 id="captures">Captures</h3>
<h5 id="valeur-ou-référence">Valeur ou référence</h5>
<p>Pour commencer, on peut choisir de capturer une variable par valeur ou par référence.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// Capture par valeur.
</span><span class="c1"></span><span class="k">const</span> <span class="k">auto</span> <span class="n">display_copy</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">]()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">};</span>

<span class="c1">// Capture par référence.
</span><span class="c1"></span><span class="k">const</span> <span class="k">auto</span> <span class="n">display_ref</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="n">value</span><span class="p">]()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">};</span>

<span class="n">display_copy</span><span class="p">();</span> <span class="c1">// =&gt; 0
</span><span class="c1"></span><span class="n">display_ref</span><span class="p">();</span>  <span class="c1">// =&gt; 0
</span><span class="c1"></span>
<span class="n">value</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="n">display_copy</span><span class="p">();</span> <span class="c1">// =&gt; 0
</span><span class="c1"></span><span class="n">display_ref</span><span class="p">();</span>  <span class="c1">// =&gt; 5
</span></code></pre></div>
<div class="notices info" ><p>Lorsque l&rsquo;on capture par référence, il faut s&rsquo;assurer que la durée de vie de la lambda ne dépassera pas celle de la variable référencée.
Si cette dernière est détruite et que l&rsquo;on appelle la lambda après, on se retrouve avec une dangling-ref.</p>
</div>

<hr>
<h5 id="capture-des-attributs-dun-objet">Capture des attributs d&rsquo;un objet</h5>
<p>Si vous écrivez une lambda à l&rsquo;intérieur d&rsquo;une fonction-membre, vous devriez vous apercevoir qu&rsquo;il n&rsquo;est pas possible de capturer les attributs de l&rsquo;objet :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="nc">CaptureTest</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">create_add_callback</span><span class="p">()</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="o">&amp;</span><span class="n">_value</span><span class="p">](</span><span class="kt">int</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_value</span> <span class="o">+</span> <span class="n">other</span><span class="p">;</span> <span class="p">};</span> <span class="c1">// =&gt; la capture ne compile pas...
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div><p>En fait, pour capturer les attributs de l&rsquo;objet, il faut capturer l&rsquo;objet en lui-même.
Pour faire cela, on écrit <code>this</code> dans la capture.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="nc">CaptureTest</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">create_add_callback</span><span class="p">()</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="k">this</span><span class="p">](</span><span class="kt">int</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_value</span> <span class="o">+</span> <span class="n">other</span><span class="p">;</span> <span class="p">};</span> <span class="c1">// =&gt; _value est maintenant accessible !
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div><p>Attention encore une fois aux durées de vie.
Si vous capturez <code>this</code>, cela revient à capturer par référence tous les attributs et fonction-membres de l&rsquo;objet.
Vous devez donc vous assurer que l&rsquo;instance capturée vivra au moins aussi longtemps que la lambda.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">auto</span> <span class="n">capture_test</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">CaptureTest</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">capture_test</span><span class="o">-&gt;</span><span class="n">_value</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="k">const</span> <span class="k">auto</span> <span class="n">add_cb</span> <span class="o">=</span> <span class="n">capture_test</span><span class="o">-&gt;</span><span class="n">create_add_callback</span><span class="p">();</span>

<span class="c1">// L&#39;instruction suivante affiche 6.
</span><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">add_cb</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="c1">// L&#39;objet capture_test est détruit.
</span><span class="c1"></span><span class="n">capture_test</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span>

<span class="c1">// L&#39;instruction suivante a un comportement indéfini (usage d&#39;une dangling-ref).
</span><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">add_cb</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre></div><hr>
<h5 id="capture-des-variables-globales">Capture des variables globales</h5>
<p>Les variables globales ne peuvent pas être capturées.
En effet, celles-ci sont déjà accessibles de base dans le corps de la lambda.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="n">global_value</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// La ligne suivante déclenche un warning.
</span><span class="c1"></span>    <span class="c1">// const auto increment_global = [&amp;global_value]() { ++global_value; };
</span><span class="c1"></span>
    <span class="c1">// Alors que celle-ci compile parfaitement.
</span><span class="c1"></span>    <span class="k">const</span> <span class="k">auto</span> <span class="n">increment_global</span> <span class="o">=</span> <span class="p">[]()</span> <span class="p">{</span> <span class="o">++</span><span class="n">global_value</span><span class="p">;</span> <span class="p">};</span>
    <span class="n">increment_global</span><span class="p">();</span>
    <span class="n">increment_global</span><span class="p">();</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">global_value</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="c1">// =&gt; 7
</span><span class="c1"></span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><hr>
<h5 id="alias">Alias</h5>
<p>Il est possible de définir un alias pour capturer un élément.
Vous pouvez ainsi utiliser des noms plus courts dans la lambda, ou encore capturer le résultat d&rsquo;une expression.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="n">variable</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">const</span> <span class="k">auto</span> <span class="n">lambda</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="o">=</span> <span class="n">variable</span><span class="p">,</span> <span class="n">square</span> <span class="o">=</span> <span class="p">(</span><span class="n">variable</span> <span class="o">*</span> <span class="n">variable</span><span class="p">)]()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">v</span> <span class="o">+</span> <span class="n">square</span><span class="p">;</span> <span class="p">};</span>
</code></pre></div><p>C&rsquo;est aussi pratique lorsque l&rsquo;on est dans une fonction-membre, et que l&rsquo;on souhaite capturer l&rsquo;instance courante par valeur (= copie) plutôt que par référence.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="nc">CaptureTest</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">create_add_callback</span><span class="p">()</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">self_copy</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span><span class="p">](</span><span class="kt">int</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">other</span> <span class="o">+</span> <span class="n">self_copy</span><span class="p">.</span><span class="n">_value</span><span class="p">;</span> <span class="p">};</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">capture_test</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">CaptureTest</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="n">capture_test</span><span class="o">-&gt;</span><span class="n">_value</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

    <span class="k">const</span> <span class="k">auto</span> <span class="n">add_cb</span> <span class="o">=</span> <span class="n">capture_test</span><span class="o">-&gt;</span><span class="n">create_add_callback</span><span class="p">();</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">add_cb</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="c1">// =&gt; 6
</span><span class="c1"></span>
    <span class="n">capture</span><span class="o">-&gt;</span><span class="n">_value</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">add_cb</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="c1">// =&gt; toujours 6, puisqu&#39;on a pas capturé par référence
</span><span class="c1"></span>
    <span class="n">capture_test</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">add_cb</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="c1">// =&gt; 12, donc plus de problème de dangling-ref !
</span><span class="c1"></span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>On peut aussi décider de restreindre la capture à un seul attribut, plutôt que de capturer l&rsquo;intégralité de l&rsquo;objet.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="nc">BunchOfStuff</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">()</span><span class="o">&gt;</span> <span class="n">update_first_stuff_cb</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Notez qu&#39;utiliser un alias n&#39;empêche pas de capturer par référence.
</span><span class="c1"></span>        <span class="k">return</span> <span class="p">[</span><span class="o">&amp;</span><span class="n">stuff</span> <span class="o">=</span> <span class="n">_stuff1</span><span class="p">]()</span> <span class="p">{</span> <span class="n">stuff</span><span class="p">.</span><span class="n">update</span><span class="p">();</span> <span class="p">};</span>
    <span class="p">}</span>

    <span class="n">Stuff</span> <span class="n">_stuff1</span><span class="p">;</span>
    <span class="n">Stuff</span> <span class="n">_stuff2</span><span class="p">;</span>
    <span class="n">Stuff</span> <span class="n">_stuff3</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div><p>Enfin, en utilisant des alias, il est possible de déplacer un objet à l&rsquo;intérieur d&rsquo;une lambda :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">()</span><span class="o">&gt;</span> <span class="n">create_display_range_cb</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="k">auto</span> <span class="p">[</span><span class="n">min</span><span class="p">,</span> <span class="n">max</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">minmax</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">values</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">generate</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">back_inserter</span><span class="p">(</span><span class="n">values</span><span class="p">),</span> <span class="n">max</span> <span class="o">-</span> <span class="n">min</span><span class="p">,</span> <span class="p">[</span><span class="n">v</span> <span class="o">=</span> <span class="n">min</span><span class="p">]()</span> <span class="k">mutable</span> <span class="p">{</span> <span class="k">return</span> <span class="n">v</span><span class="o">++</span><span class="p">;</span> <span class="p">});</span>
    
    <span class="c1">// On ne va plus utiliser &#34;values&#34; après, donc on peut déplacer le tableau dans la lambda, afin d&#39;économiser une copie.
</span><span class="c1"></span>    <span class="k">return</span> <span class="p">[</span><span class="n">values</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">values</span><span class="p">)]()</span>
    <span class="p">{</span> 
        <span class="n">std</span><span class="o">::</span><span class="n">for_each</span><span class="p">(</span><span class="n">values</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">values</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="p">[](</span><span class="kt">int</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span><span class="p">;</span> <span class="p">});</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div><hr>
<h3 id="compilation">Compilation</h3>
<p>Au moment où vous écrivez une lambda, il faut savoir que celle-ci n&rsquo;a pas encore de type.
C&rsquo;est pour cela que lorsque vous voulez créer une variable à partir d&rsquo;une lambda, vous êtes obligé d&rsquo;utiliser <code>auto</code>, ou bien de la wrapper à l&rsquo;intérieur d&rsquo;un objet de type <code>std::function</code>.</p>
<p>Le type de la lambda va être réellement généré au cours de la compilation.</p>
<p>Si la lambda ne capture rien, alors le compilateur va créer une fonction libre à partir du code de la lambda.
Le type de cette lambda sera donc un pointeur de fonction avec la même signature.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">lambda</span> <span class="o">=</span> <span class="p">[](</span><span class="kt">int</span> <span class="n">v</span><span class="p">){</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">};</span>
    <span class="n">lambda</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// pourrait être traduit par le compilateur avec :
</span><span class="c1"></span>
<span class="kt">void</span> <span class="nf">nom_autogenere_incomprehensible</span><span class="p">(</span><span class="kt">int</span> <span class="n">v</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">lambda</span><span class="p">)(</span><span class="kt">int</span><span class="p">)</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">nom_autogenere_incomprehensible</span><span class="p">;</span>
    <span class="n">lambda</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>En revanche, si la lambda capture quelque chose, alors le compilateur va générer une classe ayant pour attributs les différents éléments capturés.
La lambda aura dans ce cas pour type cette classe auto-générée.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">coeff</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">lambda</span> <span class="o">=</span> <span class="p">[</span><span class="n">coeff</span><span class="p">](</span><span class="kt">int</span> <span class="n">v</span><span class="p">){</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">coeff</span> <span class="o">*</span> <span class="n">v</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">};</span>
    <span class="n">lambda</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// pourrait être traduit par le compilateur avec :
</span><span class="c1"></span>
<span class="k">struct</span> <span class="nc">nom_autogenere_incomprehensible</span>
<span class="p">{</span>
    <span class="n">nom_autogenere_incomprehensible</span><span class="p">(</span><span class="kt">int</span> <span class="n">coeff</span><span class="p">)</span>
        <span class="o">:</span> <span class="n">_coeff</span> <span class="p">{</span> <span class="n">coeff</span> <span class="p">}</span>
    <span class="p">{}</span>

    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="kt">int</span> <span class="n">v</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">_coeff</span> <span class="o">*</span> <span class="n">v</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">_coeff</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span> 
    <span class="kt">int</span> <span class="n">coeff</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="n">nom_autogenere_incomprehensible</span> <span class="n">lambda</span> <span class="p">{</span> <span class="n">coeff</span> <span class="p">};</span>
    <span class="n">lambda</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>Comme vous pouvez le constater, dans le code ci-dessus, nous avons marqué l'<code>operator()</code> comme étant <code>const</code>.<br>
En effet, vous devriez avoir une erreur si vous essayez de compiler le code suivant :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">coeff</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">lambda</span> <span class="o">=</span> <span class="p">[</span><span class="n">coeff</span><span class="p">](</span><span class="kt">int</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span> <span class="n">coeff</span> <span class="o">+=</span> <span class="n">v</span><span class="p">;</span> <span class="p">};</span> <span class="c1">// =&gt; assignment of read-only variable &#39;coeff&#39;
</span><span class="c1"></span>    <span class="n">lambda</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>Par défaut, il n&rsquo;est pas possible de modifier les objets capturés par valeur dans une lambda.
Si vous souhaitez pouvoir le faire, il faut utiliser le mot-clef <code>mutable</code>.
Ainsi, au moment de générer le type de la lambda, le compilateur ne placera pas <code>const</code> sur l'<code>operator()</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">coeff</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">lambda</span> <span class="o">=</span> <span class="p">[</span><span class="n">coeff</span><span class="p">](</span><span class="kt">int</span> <span class="n">v</span><span class="p">)</span> <span class="k">mutable</span> <span class="p">{</span> <span class="n">coeff</span> <span class="o">+=</span> <span class="n">v</span><span class="p">;</span> <span class="p">};</span> <span class="c1">// =&gt; plus d&#39;erreur
</span><span class="c1"></span>    <span class="n">lambda</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="notices tip" ><p>Notez bien que cela ne concerne que les captures <strong>par valeur</strong>.
En effet, lorsqu&rsquo;on capture par référence, la lambda ne own pas l&rsquo;objet référencé.
Si on modifie le contenu de la référence, on ne modifie donc pas vraiment la lambda, puisque ce qui est modifié vit en dehors de la lambda.
Il est donc recommandé de ne mettre <code>mutable</code> que si vous modifiez des objets capturés par valeur.</p>
</div>



<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/CPP_Learning/chapter6/3-iterators/" title="Itérateurs"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/CPP_Learning/chapter6/test/" title="Questionnaire !" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/CPP_Learning/js/clipboard.min.js?1615615412"></script>
    <script src="/CPP_Learning/js/perfect-scrollbar.min.js?1615615412"></script>
    <script src="/CPP_Learning/js/perfect-scrollbar.jquery.min.js?1615615412"></script>
    <script src="/CPP_Learning/js/jquery.sticky.js?1615615412"></script>
    <script src="/CPP_Learning/js/featherlight.min.js?1615615412"></script>
    <script src="/CPP_Learning/js/highlight.pack.js?1615615412"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/CPP_Learning/js/modernizr.custom-3.6.0.js?1615615412"></script>
    <script src="/CPP_Learning/js/learn.js?1615615412"></script>
    <script src="/CPP_Learning/js/hugo-learn.js?1615615412"></script>

    <link href="/CPP_Learning/mermaid/mermaid.css?1615615412" rel="stylesheet" />
    <script src="/CPP_Learning/mermaid/mermaid.js?1615615412"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

