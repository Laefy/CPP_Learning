<!DOCTYPE html>
<html lang="fr" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.76.5" />
    <meta name="description" content="">


    <link rel="icon" href="/CPP_Learning/images/favicon.png" type="image/png">

    <title>Conteneurs associatifs :: Cours de C&#43;&#43; - Niveau Master</title>

    
    <link href="/CPP_Learning/css/nucleus.css?1614533464" rel="stylesheet">
    <link href="/CPP_Learning/css/fontawesome-all.min.css?1614533464" rel="stylesheet">
    <link href="/CPP_Learning/css/hybrid.css?1614533464" rel="stylesheet">
    <link href="/CPP_Learning/css/featherlight.min.css?1614533464" rel="stylesheet">
    <link href="/CPP_Learning/css/perfect-scrollbar.min.css?1614533464" rel="stylesheet">
    <link href="/CPP_Learning/css/auto-complete.css?1614533464" rel="stylesheet">
    <link href="/CPP_Learning/css/atom-one-dark-reasonable.css?1614533464" rel="stylesheet">
    <link href="/CPP_Learning/css/theme.css?1614533464" rel="stylesheet">
    <link href="/CPP_Learning/css/hugo-theme.css?1614533464" rel="stylesheet">
    
    <link href="/CPP_Learning/css/theme-mine.css?1614533464" rel="stylesheet">
    
    <link href="/CPP_Learning/css/syntax.css?1614533464" rel="stylesheet">

    <script src="/CPP_Learning/js/jquery-3.3.1.min.js?1614533464"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/CPP_Learning/chapter3/4-associatives/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://laefy.github.io/CPP_Learning/">🥞 C++ 🥞</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Rechercher...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/CPP_Learning/js/lunr.min.js?1614533464"></script>
<script type="text/javascript" src="/CPP_Learning/js/auto-complete.js?1614533464"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/laefy.github.io\/CPP_Learning\/";
    
</script>
<script type="text/javascript" src="/CPP_Learning/js/search.js?1614533464"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter1/" title="Introduction au C&#43;&#43;" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter1/">
          <b>1- </b>Introduction au C&#43;&#43;
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/1-language/" title="Présentation du langage" class="dd-item ">
        <a href="/CPP_Learning/chapter1/1-language/">
        Présentation du langage
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/CPP_Learning/chapter1/2-tools/" title="Outils" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter1/2-tools/">
          Outils
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/2-tools/1-vscode/" title="Visual Studio Code" class="dd-item ">
        <a href="/CPP_Learning/chapter1/2-tools/1-vscode/">
        Visual Studio Code
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/2-tools/2-cmake/" title="CMake" class="dd-item ">
        <a href="/CPP_Learning/chapter1/2-tools/2-cmake/">
        CMake
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/2-tools/3-git/" title="Git" class="dd-item ">
        <a href="/CPP_Learning/chapter1/2-tools/3-git/">
        Git
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/2-tools/4-compilation/" title="Compilation &amp; Exécution" class="dd-item ">
        <a href="/CPP_Learning/chapter1/2-tools/4-compilation/">
        Compilation &amp; Exécution
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/CPP_Learning/chapter1/3-practice/" title="Premiers programmes" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter1/3-practice/">
          Premiers programmes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/3-practice/1-hello-world/" title="👋 Hello World" class="dd-item ">
        <a href="/CPP_Learning/chapter1/3-practice/1-hello-world/">
        👋 Hello World
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/3-practice/2-parrot.fd/" title="🦜 Perroquet" class="dd-item ">
        <a href="/CPP_Learning/chapter1/3-practice/2-parrot.fd/">
        🦜 Perroquet
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/3-practice/3-array/" title="🔢 Tableau Numérique" class="dd-item ">
        <a href="/CPP_Learning/chapter1/3-practice/3-array/">
        🔢 Tableau Numérique
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/3-practice/4-calculator/" title="🧮 Calculette" class="dd-item ">
        <a href="/CPP_Learning/chapter1/3-practice/4-calculator/">
        🧮 Calculette
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter1/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter1/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter1/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter2/" title="Classes" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter2/">
          <b>2- </b>Classes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/1-poo/" title="C&#39;est quoi un objet déjà ?" class="dd-item ">
        <a href="/CPP_Learning/chapter2/1-poo/">
        C&#39;est quoi un objet déjà ?
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/2-first-class/" title="✨ Première classe" class="dd-item ">
        <a href="/CPP_Learning/chapter2/2-first-class/">
        ✨ Première classe
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/3-constructor/" title="🔨 Constructeur" class="dd-item ">
        <a href="/CPP_Learning/chapter2/3-constructor/">
        🔨 Constructeur
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/4-clone/" title="🧬 Clône" class="dd-item ">
        <a href="/CPP_Learning/chapter2/4-clone/">
        🧬 Clône
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/5-rectangle/" title="🔳 Rectangle" class="dd-item ">
        <a href="/CPP_Learning/chapter2/5-rectangle/">
        🔳 Rectangle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/6-polygon/" title="💠 Polygône" class="dd-item ">
        <a href="/CPP_Learning/chapter2/6-polygon/">
        💠 Polygône
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter2/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter2/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter2/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter3/" title="Conteneurs standards" class="dd-item 
        parent
        
        
        ">
      <a href="/CPP_Learning/chapter3/">
          <b>3- </b>Conteneurs standards
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/1-doc/" title="Un peu de doc..." class="dd-item ">
        <a href="/CPP_Learning/chapter3/1-doc/">
        Un peu de doc...
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/2-vectors/" title="Tableaux dynamiques" class="dd-item ">
        <a href="/CPP_Learning/chapter3/2-vectors/">
        Tableaux dynamiques
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/3-sequentials/" title="Autres conteneurs séquentiels" class="dd-item ">
        <a href="/CPP_Learning/chapter3/3-sequentials/">
        Autres conteneurs séquentiels
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/4-associatives/" title="Conteneurs associatifs" class="dd-item active">
        <a href="/CPP_Learning/chapter3/4-associatives/">
        Conteneurs associatifs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/5-strings/" title="Manipulation de chaînes" class="dd-item ">
        <a href="/CPP_Learning/chapter3/5-strings/">
        Manipulation de chaînes
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/6-tuples/" title="Paires et tuples" class="dd-item ">
        <a href="/CPP_Learning/chapter3/6-tuples/">
        Paires et tuples
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter3/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter3/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter3/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter4/" title="Héritage" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter4/">
          <b>4- </b>Héritage
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/1-hierarchy/" title="💼 Hiérarchie professionnelle" class="dd-item ">
        <a href="/CPP_Learning/chapter4/1-hierarchy/">
        💼 Hiérarchie professionnelle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/2-farm/" title="🐮 Concerto animalier" class="dd-item ">
        <a href="/CPP_Learning/chapter4/2-farm/">
        🐮 Concerto animalier
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/3-virtual/" title="Résolution d&#39;appel virtuel" class="dd-item ">
        <a href="/CPP_Learning/chapter4/3-virtual/">
        Résolution d&#39;appel virtuel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/4-polymorphism/" title="Polymorphisme" class="dd-item ">
        <a href="/CPP_Learning/chapter4/4-polymorphism/">
        Polymorphisme
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/5-vehicles/" title="🚗 Véhicule partagé" class="dd-item ">
        <a href="/CPP_Learning/chapter4/5-vehicles/">
        🚗 Véhicule partagé
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter4/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter4/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter4/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CPP_Learning/chapter5/" title="Gestion des ressources" class="dd-item 
        
        
        
        ">
      <a href="/CPP_Learning/chapter5/">
          <b>5- </b>Gestion des ressources
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/1-lifespan/" title="Durée de vie" class="dd-item ">
        <a href="/CPP_Learning/chapter5/1-lifespan/">
        Durée de vie
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/2-ownership/" title="Ownership" class="dd-item ">
        <a href="/CPP_Learning/chapter5/2-ownership/">
        Ownership
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/3-smart-ptrs/" title="Pointeurs intelligents" class="dd-item ">
        <a href="/CPP_Learning/chapter5/3-smart-ptrs/">
        Pointeurs intelligents
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/test/" title="Questionnaire !" class="dd-item ">
        <a href="/CPP_Learning/chapter5/test/">
        Questionnaire !
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CPP_Learning/chapter5/summary/" title="Synthèse" class="dd-item ">
        <a href="/CPP_Learning/chapter5/summary/">
        Synthèse
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>Accès rapide</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/Laefy/CPP_Learning_Code/"><i class='fab fa-github'></i> Dépôt GitHub</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://laefy.github.io/CPP_Learning/workflow"><i class='far fa-list-alt'></i> Workflow</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://laefy.github.io/CPP_Learning/faq"><i class='fas fa-question-circle'></i> FAQ</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://en.cppreference.com/w/"><i class='fas fa-passport'></i> CPP-Ref</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Supprimer l&#39;historique</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/CPP_Learning/'>Accueil</a> > <a href='/CPP_Learning/chapter3/'>Conteneurs standards</a> > Conteneurs associatifs
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#les-sets-ensembles">Les sets (ensembles)</a></li>
        <li><a href="#les-maps-dictionnaires">Les maps (dictionnaires)</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Conteneurs associatifs
            </h1>
          

        


<p>Un conteneur associatif est un conteneur dans lequel les éléments peuvent être indexés par des objets, et non plus seulement par des entiers.<br>
Vous allez donc ici voir les différents types de conteneurs associatifs proposés par la STL.</p>
<hr>
<p>Pour cet exercice, vous modifierez les fichiers :<br>
- <code>chap-03/3-associatives/main.cpp</code><br>
- <code>chap-03/3-associatives/keys.h</code></p>
<p>La cible à compiler est <code>c3-3-associatives</code>.</p>
<hr>
<h3 id="les-sets-ensembles">Les sets (ensembles)</h3>
<p>Un set est un conteneur dans lequel les éléments sont &ldquo;indexés par eux-mêmes&rdquo;. Il y a deux cas d&rsquo;utilisation classiques d&rsquo;un <code>set</code>:</p>
<ul>
<li>disposer d&rsquo;un conteneur qui ne peut contenir qu&rsquo;une seule fois un même élément,</li>
<li>savoir si un conteneur contient ou non un élément très rapidement.</li>
</ul>
<p>Dans la librairie standard, vous pouvez trouver <code>std::set</code> et <code>std::unordered_set</code> qui permettent de manipuler des sets. En analysant leur documentation, pouvez-vous identifier les différences principales entre ces deux classes ?</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>Complexité :</p>
<ul>
<li><code>std::set</code> est implémenté (généralement) comme un arbre binaire de recherche. Les opérations d&rsquo;insertions, de recherches et de comparaison s&rsquo;effectuent donc en temps logarithmique. En ce qui concerne l&rsquo;espace mémoire utilisé, les arbres binaires de recherche ont généralement besoin d&rsquo;autant de mémoire qu&rsquo;il y a d&rsquo;éléments à stocker, c&rsquo;est-à-dire O(n).</li>
<li><code>std::unordered_set</code> est implémenté en utilisant des &ldquo;buckets&rdquo;, indexés par le hash de l&rsquo;objet (comme dans une hashmap). Les opérations d&rsquo;insertions, de recherches et de comparaison s&rsquo;effectuent donc en temps constant amorti (&ldquo;amorti&rdquo;, car si deux objets ont le même hash, il faut potentiellement parcourir une liste d&rsquo;objects ensuite). La documentation ne donne pas de détail concernant l&rsquo;espace mémoire alloué par un <code>unordered_set</code>, mais si vous vous rappelez de votre cours d&rsquo;algorithmique, pour qu&rsquo;une hashmap soit efficace, il faut limiter le nombre de conflits possibles. Cela implique que l&rsquo;espace alloué doit être très largement supérieur à l&rsquo;espace réellement occupé par les éléments.</li>
</ul>
<p>Contraintes :</p>
<ul>
<li><code>std::set</code> attend que ses éléments soient comparables (= qu&rsquo;il existe une fonction permettant de dire si un élément est plus petit qu&rsquo;un autre).</li>
<li><code>std::unordered_set</code> attend que ses éléments soient hashables (= qu&rsquo;il existe une fonction permettant de convertir un élément en un entier, respectant le fait que si deux éléments sont considérés égaux, alors les deux entiers obtenus sont égaux également) et qu&rsquo;il existe une fonction permettant de savoir si deux éléments sont égaux ou non (il n&rsquo;est pas nécessaire ici d&rsquo;avoir une relation d&rsquo;ordre sur les éléments).</li>
</ul>

    </div>
</div>
<p>Dans les fichiers de l&rsquo;exercice, on vous fournit deux classes <code>ComparableDog</code> et <code>HashableDog</code>. Ces deux classes sont pour le moment identique : elles contiennent deux attributs <code>_name</code> et <code>_species</code>.<br>
Votre objectif sera d&rsquo;ajouter les fonctions nécessaires pour utiliser ces classes dans des sets.</p>
<h4 id="1-stdset">1. <code>std::set</code></h4>
<p>Pour pouvoir placer des éléments dans un <code>set</code>, nous avons dit qu&rsquo;ils devaient être comparables. Le plus simple pour cela, c&rsquo;est de créer un <code>operator&lt;</code> pour la classe. Les opérateurs de comparaison peuvent être définis soit en tant que fonction-membre, soit en tant que fonction libre.</p>
<p>Fonction-membre :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">SomeClass</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">SomeClass</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="cm">/* whether this and other are equal */</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div><p>Fonction libre :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">// SomeClass.h
</span><span class="c1"></span>
<span class="k">class</span> <span class="nc">SomeClass</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">};</span>

<span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">SomeClass</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">SomeClass</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">);</span>

<span class="c1">// SomeClass.cpp
</span><span class="c1"></span>
<span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">SomeClass</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">SomeClass</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="cm">/* whether a and b are equal */</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="notices info" ><p>Notez bien que si vous voulez utiliser une fonction libre, vous devrez peut-être exposer vos attributs dans des getters ou déclarer <code>operator&lt;</code> comme une fonction amie de la classe.</p>
</div>

<p>Commencez par définir un <code>set</code> contenant des <code>ComparableDog</code> dans la fonction <code>main</code>. Essayez de compiler. Jusque là, tout devrait bien se passer.<br>
Instanciez maintenant une variable de type <code>ComparableDog</code>, et ajoutez-là à votre <code>set</code>.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">ComparableDog</span><span class="o">&gt;</span> <span class="n">dogs</span><span class="p">;</span>

<span class="n">ComparableDog</span> <span class="n">medor</span> <span class="p">{</span> <span class="s">&#34;medor&#34;</span><span class="p">,</span> <span class="s">&#34;labrador&#34;</span> <span class="p">};</span>
<span class="n">dogs</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">medor</span><span class="p">);</span>
</code></pre></div>
    </div>
</div>
<p>Essayez à nouveau de compiler. Vos yeux devraient désormais commencer à saigner, ce qui est normal. Je vous rassure, avec un peu d&rsquo;entraînement, cela n&rsquo;arrivera plus.<br>
Du coup, essuyez vos larmes et enfilez vos lunettes si vous en avez, et tentez d&rsquo;identifier ce que le compilateur essaye de vous communiquer.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>Le compilateur essaye simplement de vous dire qu&rsquo;il n&rsquo;arrive pas à trouver de fonction permettant d&rsquo;évaluer l&rsquo;expression <code>x &lt; y</code>.<br>
Vous allez donc devoir définir un opérateur de comparaison pour la classe <code>ComparableDog</code>.</p>

    </div>
</div>
<p>Implémentez ce qu&rsquo;il manque pour que votre programme compile.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">ComparableDog</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">ComparableDog</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">species</span><span class="p">)</span>
        <span class="o">:</span> <span class="n">_name</span> <span class="p">{</span> <span class="n">name</span> <span class="p">},</span> <span class="n">_species</span> <span class="p">{</span> <span class="n">species</span> <span class="p">}</span>
    <span class="p">{}</span>

    <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">ComparableDog</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_name</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">_name</span> <span class="o">&gt;</span> <span class="n">other</span><span class="p">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">_species</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">.</span><span class="n">_species</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_name</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_species</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
    </div>
</div>
<p>Créez maintenant une nouvelle instance de <code>ComparableDog</code>, différente de la première, et ajoutez-là au set.<br>
Affichez le nombre d&rsquo;éléments du set pour vérifier qu&rsquo;il en contient maintenant 2.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">ComparableDog</span> <span class="n">gus</span> <span class="p">{</span> <span class="s">&#34;gus&#34;</span><span class="p">,</span> <span class="s">&#34;bordercollie&#34;</span> <span class="p">};</span>
<span class="n">dogs</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">gus</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">dogs</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre></div>
    </div>
</div>
<p>Instanciez maintenant une copie de votre premier chien, et ajoutez-là à votre set.<br>
Combien y a-t-il d&rsquo;éléments dans le <code>set</code> après cette opération ? Pourquoi ?</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">ComparableDog</span> <span class="n">medor_clone</span> <span class="o">=</span> <span class="n">medor</span><span class="p">;</span>
<span class="n">dogs</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">medor_clone</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">dogs</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre></div><p>Votre <code>set</code> ne devrait contenir que 2 éléments, car par définition, dans un set, les éléments sont uniques. Comme <code>medor</code> existe déjà dans l&rsquo;ensemble, <code>medor_clone</code> qui lui est égal n&rsquo;est pas ajouté.</p>
<p>Si ce n&rsquo;est pas le cas chez vous et que la copie est ajoutée malgré tout, c&rsquo;est probablement que l&rsquo;implémentation de votre opérateur de comparaison est un peu bancale.</p>

    </div>
</div>
<h4 id="2-stdunordered_set">2. <code>std::unordered_set</code></h4>
<p>Vous allez maintenant faire le même exercice, mais avec un <code>std::unordered_set</code> plutôt qu&rsquo;un <code>set</code>.</p>
<p>Commencez du coup par définir un <code>unordered_set</code> contenant des <code>HashableDog</code> dans la fonction <code>main</code> et essayez de compiler. Vous devriez vous retrouver avec un paquet d&rsquo;erreurs.<br>
Comme tout à l&rsquo;heure, essayez d&rsquo;identifier la cause de leur déclenchement.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">std</span><span class="o">::</span><span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">HashableDog</span><span class="o">&gt;</span> <span class="n">dogs</span><span class="p">;</span>
</code></pre></div><p>Ici, la première erreur n&rsquo;aide pas du tout : &ldquo;use of deleted function &lsquo;std::unordered_set&lt;$£^p%*ù$&gt;'&rdquo;.<br>
Il faut donc scroller plus bas, jusqu&rsquo;à tomber sur celle-ci : &ldquo;use of deleted function &lsquo;std::hash<HashableDog>::hash()&rsquo;.</p>
<p>Rappelez-vous, pour utiliser un <code>unordered_set</code>, une des contraintes est que le type des éléments doit être hashable. Et d&rsquo;après l&rsquo;erreur, ce n&rsquo;est pas le cas de <code>HashableDog</code>.</p>

    </div>
</div>
<p>Afin de rendre une classe hashable, il faut spécialiser une fonction de la librairie standard que l&rsquo;on appelle <code>hash</code>. Pour ce faire, vous devez d&rsquo;abord inclure le header <code>&lt;functional&gt;</code>, puis écrire le code suivant :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">namespace</span> <span class="n">std</span> <span class="p">{</span>

<span class="k">template</span> <span class="o">&lt;&gt;</span>
<span class="k">struct</span> <span class="nc">hash</span><span class="o">&lt;</span><span class="n">ClassToMakeHashable</span><span class="o">&gt;</span>
<span class="p">{</span>
    <span class="n">size_t</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">ClassToMakeHashable</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="cm">/* some value that can be computed from c */</span><span class="p">;</span>
    <span class="p">}</span> 
<span class="p">};</span>

<span class="p">}</span>
</code></pre></div><p>Ne vous posez pas trop de questions pour le moment sur la syntaxe du code ci-dessus. Vous pouvez directement le copier-coller à la fin du fichier <code>keys.h</code>, en remplaçant <code>ClassToMakeHashable</code> par le nom de votre classe.
En ce qui concerne le contenu de la fonction, vous allez devoir générer un hash en combinant les hashs des attributs de la classe <code>HashableDog</code>.</p>
<p>Pour récupérer le hash d&rsquo;une <code>string</code>, vous devez déclarer une variable de type <code>std::hash&lt;std::string&gt;</code>, puis appeler son <code>operator()</code> sur la <code>string</code> en question. Ca donne quelque chose comme ça :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">std</span><span class="o">::</span><span class="n">hash</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">hash_fcn</span><span class="p">;</span>
<span class="n">size_t</span>                 <span class="n">hash_of_blablabla</span> <span class="o">=</span> <span class="n">hash_fcn</span><span class="p">(</span><span class="s">&#34;blablabla&#34;</span><span class="p">);</span>
</code></pre></div><p>Vous pouvez ensuite combiner plusieurs valeurs de hash ensemble en utilisant des opérateurs binaires (<code>^</code>, <code>+</code>, <code>*</code>, ou n&rsquo;importe quoi d&rsquo;autres, ce n&rsquo;est pas vraiment important du moment que vous renvoyer bien quelque chose à la fin) :</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">std</span><span class="o">::</span><span class="n">hash</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">hash_fcn</span><span class="p">;</span>
<span class="n">size_t</span>                 <span class="n">hash_final</span> <span class="o">=</span> <span class="n">hash_fcn</span><span class="p">(</span><span class="s">&#34;first&#34;</span><span class="p">)</span> <span class="o">^</span> <span class="n">hash_fcn</span><span class="p">(</span><span class="s">&#34;second&#34;</span><span class="p">)</span> <span class="o">^</span> <span class="n">hash_fcn</span><span class="p">(</span><span class="s">&#34;third&#34;</span><span class="p">);</span>
</code></pre></div>
<div class="notices note" ><p>Lorsqu&rsquo;on défini un <code>operator()</code> dans une classe, il est ensuite possible d&rsquo;utiliser les instances de cette classe comme des fonctions. C&rsquo;est pour cela que ce genre d&rsquo;objets est appelé <strong>foncteur</strong>.</p>
</div>

<p>Implémentez le contenu de <code>hash&lt;HashableDog&gt;::operator()</code>.<br>
Afin de pouvoir accéder aux attributs de <code>HashableDog</code> depuis cette fonction, vous pouvez les déplacer dans la partie publique.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">size_t</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">HashableDog</span><span class="o">&amp;</span> <span class="n">dog</span><span class="p">)</span> <span class="k">const</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">hash</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">hash_fcn</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">hash_fcn</span><span class="p">(</span><span class="n">dog</span><span class="p">.</span><span class="n">_name</span><span class="p">)</span> <span class="o">^</span> <span class="n">hash_fcn</span><span class="p">(</span><span class="n">dog</span><span class="p">.</span><span class="n">_species</span><span class="p">);</span>
<span class="p">}</span> 
</code></pre></div>
    </div>
</div>
<p>Une fois que cela compile, refactorisez votre code pour remettre les attributs dans la partie privée.<br>
Pour cela, définissez une fonction-membre publique <code>get_hash</code> dans la classe <code>HashableDog</code>, que vous appelerez depuis <code>hash&lt;HashableDog&gt;::operator()</code>.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>N&rsquo;oubliez pas le <code>const</code> dans la signature de <code>get_hash</code>. En effet, vous ne pourrez pas appeler <code>get_hash</code> sur un <code>const HashableDog&amp;</code> si vous oubliez de le mettre.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">HashableDog</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="p">...</span>

    <span class="n">size_t</span> <span class="n">get_hash</span><span class="p">()</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">hash</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">hash_fcn</span><span class="p">;</span>
        <span class="k">return</span> <span class="nf">hash_fcn</span><span class="p">(</span><span class="n">_name</span><span class="p">)</span> <span class="o">^</span> <span class="n">hash_fcn</span><span class="p">(</span><span class="n">_species</span><span class="p">);</span>
    <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
    <span class="p">...</span>
<span class="p">};</span>

<span class="k">namespace</span> <span class="n">std</span> <span class="p">{</span>

<span class="k">template</span> <span class="o">&lt;&gt;</span>
<span class="k">struct</span> <span class="nc">hash</span><span class="o">&lt;</span><span class="n">HashableDog</span><span class="o">&gt;</span>
<span class="p">{</span>
    <span class="n">size_t</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">HashableDog</span><span class="o">&amp;</span> <span class="n">dog</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">dog</span><span class="p">.</span><span class="n">get_hash</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="p">}</span>
</code></pre></div>
    </div>
</div>
<p>Instanciez maintenant une variable de type <code>HashableDog</code>, ajoutez-là à votre set et essayez de compiler.<br>
Comme vous pouvez le voir, aujourd&rsquo;hui, le compilateur de vous apprécie pas. Déterminez à partir des erreurs de compilation ce qu&rsquo;il manque dans la classe <code>HashableDog</code> pour que le programme compile.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">std</span><span class="o">::</span><span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">HashableDog</span><span class="o">&gt;</span> <span class="n">dogs</span><span class="p">;</span>

<span class="n">HashableDog</span> <span class="n">medor</span> <span class="p">{</span> <span class="s">&#34;medor&#34;</span><span class="p">,</span> <span class="s">&#34;labrador&#34;</span> <span class="p">};</span>
<span class="n">dogs</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">medor</span><span class="p">);</span>
</code></pre></div><p>D&rsquo;après l&rsquo;erreur, il faut implémentez un <code>operator==</code> dans la classe.</p>

    </div>
</div>
<p>Ajoutez la fonction manquante (même signature que <code>operator&lt;</code>) et vérifiez ensuite que tout fonctionne.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">HashableDog</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="p">...</span>

    <span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span> <span class="n">HashableDog</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_name</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">_name</span> <span class="o">&amp;&amp;</span> <span class="n">_species</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">_species</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="p">...</span>
<span class="p">};</span>
</code></pre></div>
    </div>
</div>
<p>Vous pouvez ensuite essayer d&rsquo;ajouter de nouveaux éléments dans votre <code>unordered_set</code>. Vous devriez avoir le même comportement qu&rsquo;avec la classe <code>set</code> : les éléments sont ajoutés seulement s&rsquo;ils n&rsquo;apparaissent pas déjà dans le conteneur.</p>
<hr>
<h3 id="les-maps-dictionnaires">Les maps (dictionnaires)</h3>
<p>Une map est un conteneur dans lequel chaque valeur est indexé par une clef. Dans la STL, vous pouvez trouver les classes <code>std::map</code> et <code>std::unordered_map</code>.</p>
<p>Les différences entre <code>map</code> et <code>unordered_map</code> sont exactement les mêmes que les différences entre <code>set</code> et <code>unordered_set</code>. D&rsquo;ailleurs, <code>std::[unordered_]map</code>, c&rsquo;est la même chose que <code>std::[unordered_]set</code>, si ce n&rsquo;est que pour chaque élément du conteneur, on stocke une valeur en plus de la clef.<br>
En particulier, vous retrouvez les mêmes contraintes sur le type des clefs :</p>
<ul>
<li>opérateur de comparaison pour la clef d&rsquo;une <code>map</code>,</li>
<li>fonction de hash et opérateur d&rsquo;égalité pour la clef d&rsquo;une <code>unordered_map</code>.</li>
</ul>
<p>Vous allez maintenant définir une variable de type <code>std::map&lt;key, value&gt;</code> qui stocke pour chaque chien (= clef) le nom et prénom de son propriétaire (= valeur).<br>
Quel type pouvez-vous utiliser pour la clef ? Pour la valeur, vous pouvez utiliser une <code>std::pair&lt;std::string, std::string&gt;</code> (n&rsquo;hésitez pas à créer un alias).</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>Pour la clef, on peut réutiliser la classe <code>ComparableDog</code>, qui dispose déjà d&rsquo;un opérateur de comparaison.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">using</span> <span class="n">Owner</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">ComparableDog</span><span class="p">,</span> <span class="n">Owner</span><span class="o">&gt;</span> <span class="n">owners_by_dog</span><span class="p">;</span>
</code></pre></div>
    </div>
</div>
<p>Pour insérer des éléments dans une <code>map</code>, vous pouvez utiliser plein de fonctions différentes. Consultez la documentation pour trouver le nom de ces fonctions et identifiez leurs différences (comportement / syntaxe).</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>Comportement :</p>
<ul>
<li><code>insert</code> / <code>emplace</code> / <code>try_emplace</code> : insère l&rsquo;élément dans la map seulement si la clef n&rsquo;est pas déjà présente,</li>
<li><code>insert_or_assign</code> : insère l&rsquo;élément dans la map et remplace l&rsquo;élément existant si la clef était déjà présente,</li>
</ul>
<p>Syntaxe :</p>
<ul>
<li><code>insert</code> : la fonction attend une <code>pair</code> : <code>dict.insert(std::make_pair(key, value));</code> / <code>dict.insert({ key, value });</code></li>
<li><code>insert_or_assign</code> : on peut passer la clef et la valeur directement : <code>dict.insert_or_assign(key, value);</code></li>
<li><code>emplace</code> : on peut aussi passer la clef et la valeur directement : <code>dict.emplace(key, value);</code></li>
<li><code>try_emplace</code> : on peut passer la clef en premier, puis les paramètres de construction de la valeur à la suite : <code>dict.try_emplace(key, p1, p2, p3);</code></li>
</ul>

    </div>
</div>
<p>Essayez d&rsquo;ajouter plusieurs éléments à votre map, en utilisant chacune de ces fonctions.<br>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>Pour la clef, on peut réutiliser la classe <code>ComparableDog</code>, qui dispose déjà d&rsquo;un opérateur de comparaison.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">ComparableDog</span><span class="p">,</span> <span class="n">Owner</span><span class="o">&gt;</span> <span class="n">owners_by_dog</span><span class="p">;</span>

<span class="n">ComparableDog</span> <span class="n">medor</span> <span class="p">{</span> <span class="s">&#34;medor&#34;</span><span class="p">,</span> <span class="s">&#34;labrador&#34;</span> <span class="p">};</span>
<span class="n">ComparableDog</span> <span class="n">gus</span> <span class="p">{</span> <span class="s">&#34;gus&#34;</span><span class="p">,</span> <span class="s">&#34;bordercollie&#34;</span> <span class="p">};</span>
<span class="n">ComparableDog</span> <span class="n">zim</span> <span class="p">{</span> <span class="s">&#34;zim&#34;</span><span class="p">,</span> <span class="s">&#34;poodle&#34;</span> <span class="p">};</span>
<span class="n">ComparableDog</span> <span class="n">flippy</span> <span class="p">{</span> <span class="s">&#34;flippy&#34;</span><span class="p">,</span> <span class="s">&#34;spaniel&#34;</span> <span class="p">};</span>

<span class="n">owners_by_dog</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">medor</span><span class="p">,</span> <span class="n">Owner</span> <span class="p">{</span> <span class="s">&#34;Claire&#34;</span><span class="p">,</span> <span class="s">&#34;David&#34;</span> <span class="p">}));</span>
<span class="n">owners_by_dog</span><span class="p">.</span><span class="n">insert_or_assign</span><span class="p">(</span><span class="n">gus</span><span class="p">,</span> <span class="n">Owner</span> <span class="p">{</span> <span class="s">&#34;Marc&#34;</span><span class="p">,</span> <span class="s">&#34;Zipstein&#34;</span> <span class="p">});</span>
<span class="n">owners_by_dog</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">zim</span><span class="p">,</span> <span class="n">Owner</span> <span class="p">{</span> <span class="s">&#34;Céline&#34;</span><span class="p">,</span> <span class="s">&#34;Noël&#34;</span> <span class="p">});</span>
<span class="n">owners_by_dog</span><span class="p">.</span><span class="n">try_emplace</span><span class="p">(</span><span class="n">flippy</span><span class="p">,</span> <span class="s">&#34;Vincent&#34;</span><span class="p">,</span> <span class="s">&#34;Nozick&#34;</span><span class="p">);</span>

<span class="n">owners_by_dog</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">gus</span><span class="p">,</span> <span class="n">Owner</span> <span class="p">{</span> <span class="s">&#34;Claire&#34;</span><span class="p">,</span> <span class="s">&#34;David&#34;</span> <span class="p">});</span>
<span class="c1">// -&gt; gus is still owned by Marc (emplace does not modify values with existing keys, neither does insert or try_emplace)
</span><span class="c1"></span>
<span class="n">owners_by_dog</span><span class="p">.</span><span class="n">insert_or_assign</span><span class="p">(</span><span class="n">gus</span><span class="p">,</span> <span class="n">Owner</span> <span class="p">{</span> <span class="s">&#34;Vincent&#34;</span><span class="p">,</span> <span class="s">&#34;Nozick&#34;</span> <span class="p">});</span>
<span class="c1">// -&gt; gus is now owned by Vincent (insert_or_assign reassign values with existing keys)
</span></code></pre></div>
    </div>
</div></p>
<p>Que faut-il maintenant faire si vous souhaitez utiliser une <code>unordered_map</code> plutôt qu&rsquo;une <code>map</code> ?</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>Il suffit d&rsquo;utiliser des clefs de type <code>HashableDog</code> plutôt que <code>ComparableDog</code>.</p>

    </div>
</div>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/CPP_Learning/chapter3/3-sequentials/" title="Autres conteneurs séquentiels"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/CPP_Learning/chapter3/5-strings/" title="Manipulation de chaînes" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/CPP_Learning/js/clipboard.min.js?1614533464"></script>
    <script src="/CPP_Learning/js/perfect-scrollbar.min.js?1614533464"></script>
    <script src="/CPP_Learning/js/perfect-scrollbar.jquery.min.js?1614533464"></script>
    <script src="/CPP_Learning/js/jquery.sticky.js?1614533464"></script>
    <script src="/CPP_Learning/js/featherlight.min.js?1614533464"></script>
    <script src="/CPP_Learning/js/highlight.pack.js?1614533464"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/CPP_Learning/js/modernizr.custom-3.6.0.js?1614533464"></script>
    <script src="/CPP_Learning/js/learn.js?1614533464"></script>
    <script src="/CPP_Learning/js/hugo-learn.js?1614533464"></script>

    <link href="/CPP_Learning/mermaid/mermaid.css?1614533464" rel="stylesheet" />
    <script src="/CPP_Learning/mermaid/mermaid.js?1614533464"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

